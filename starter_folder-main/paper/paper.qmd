---
title: "Decoding Traffic Collision Trends: The Influence of Impact Type, Road Conditions, and Time of Day on Accident Outcomes"
subtitle: "Investigating How Collision Types and Road Conditions Affect Accident Patterns Over Time in Urban Areas"
author: 
  - Qingyang Feng
thanks: "Code and data are available at: LINK."
date: "September 24, 2024"
date-format: long
abstract: "This paper explores urban traffic accidents by examining the role of impact types, road conditions, and time of day on accident frequency and severity. Visual data analysis shows rear-end collisions are the most common, particularly during peak hours and under dry road conditions. Severe accidents are more likely to occur in adverse conditions such as wet and icy roads. These findings highlight key areas for improving road safety and accident prevention measures in urban environments."
format: pdf
number-sections: true
bibliography: references.bib
---

```{r}
#| echo: false
#| warning: false
#### Preamble ####

# Purpose: Generates a paper titled "Decoding Traffic Collision Trends: The 
# Influence of Impact Type, Road Conditions, and Time of Day on Accident 
# Outcomes" in PDF format when rendered.
# Author: Qingyang Feng
# Date: September 24, 2024
# Contact: lingtianchenming@gmail.com
# Pre-requisites: Run the file "00-simulate_data.R" and "02-data_cleaning.R".
```

```{r}
#| echo: false
#| warning: false
#### Loading Packages ####

# install.packages("tidyverse")
# install.packages("opendatatoronto")
# install.packages("here")
library(tidyverse)
library(here)
library(opendatatoronto)
library(tidyverse)
```


# Introduction

Urban traffic accidents pose a major challenge to public safety, leading to substantial injuries, fatalities, and economic consequences. Investigating the factors that influence both the frequency and severity of traffic incidents in urban areas is crucial for developing targeted road safety measures. This paper explores how environmental and temporal factors—such as road conditions, impact types, and time of day—affect accident patterns in urban settings. Through a detailed analysis of accident data, this study identifies key collision types and their associated injury outcomes under varying conditions.

While previous studies have examined broad accident trends, there remains a need to focus on how specific factors interact to exacerbate accident outcomes. By addressing this gap, our research sheds light on the prevalence of rear-end collisions during peak hours and dry conditions, while also highlighting how severe accidents are more likely to occur in adverse weather conditions such as wet or icy roads. This information can aid in creating more effective safety interventions and traffic management strategies.

This paper is structured as follows: In Section @sec-data, we describe the dataset and provide an overview of the key variables used in the analysis. Section @sec-results discusses the results of our data-driven analysis, focusing on the relationship between impact types, road conditions, and time of day. Section @sec-discussion offers a discussion of the findings and their broader implications for urban road safety improvements. Finally, Section @sec-conclusion concludes the paper with key recommendations and directions for future research.


# Data {#sec-data}

Some of our data is of penguins (@fig-bills), from @opendatatoronto.

```{r}
#| label: fig-year-accident
#| fig-cap: Histogram of Accidents per Year
#| echo: false
# Search for a specific package on OpenDataToronto by keyword ("Marriage Licence Statistics")
Motor_Collisions_packages <- search_packages("Motor Vehicle Collisions involving Killed or Seriously Injured Persons")
Motor_Collisions_packages
# Retrieve a list of all resources (datasets) available within the found package
Motor_Collision_resources <- Motor_Collisions_packages %>%
  list_package_resources()
# Display the list of resources available in the "Marriage Licence Statistics" package
Motor_Collision_resources

Motor_Collision_statistics <- Motor_Collision_resources[2,] %>%
  get_resource()
Motor_data = Motor_Collision_statistics
# Install ggplot2 if not already installed
# install.packages("ggplot2")
# Load required packages
library(ggplot2)
library(dplyr)

# Assuming your dataset is loaded into a dataframe called 'Motor_data'
# Convert DATE to Date format and TIME to numeric
Motor_data$DATE <- as.Date(Motor_data$DATE, format="%Y-%m-%d")
Motor_data$YEAR <- as.numeric(format(Motor_data$DATE, "%Y"))
Motor_data$TIME <- as.numeric(Motor_data$TIME)

# Histogram for Accidents per Year
ggplot(Motor_data, aes(x=YEAR)) +
  geom_histogram(binwidth=1, fill="blue", color="black") +
  labs(title="Histogram of Accidents per Year", x="Year", y="Frequency of Accidents") +
  theme_minimal()
```
### Explanation of the Graph (Based on the Dataset and Rubric):

The graph labeled as **@fig-year-accident** shows a histogram of the frequency of accidents over the years, specifically focusing on motor vehicle collisions involving killed or seriously injured persons, as retrieved from the dataset. The histogram provides a visual representation of how accident occurrences fluctuate from year to year.

#### Context of the Dataset:
The dataset comes from OpenDataToronto and focuses on motor vehicle collisions where individuals were either killed or seriously injured. This dataset is highly relevant for analyzing accident patterns over time and understanding any trends related to accident frequency across multiple years.

#### Key Variables:
- **Year (YEAR)**: The X-axis represents the year in which accidents occurred, spanning from 2005 to 2023.
- **Frequency of Accidents**: The Y-axis represents the number of accidents that occurred in each respective year.

#### Broader Context and Explanation:
From the histogram, it is clear that the dataset captures accident trends across nearly two decades. Early years (2005–2010) show a higher frequency of accidents, particularly around 2005, with nearly 1500 incidents recorded. After 2010, the number of accidents decreases, reaching a low in 2015. The reduction in accident frequency might be attributed to improvements in traffic management, safety regulations, or public awareness campaigns.

In recent years, especially post-2020, the data shows a noticeable drop, which could potentially be influenced by external factors such as the COVID-19 pandemic, which caused significant reductions in road traffic due to lockdowns and travel restrictions.

#### Insights:
- **High-level Summary**: The graph provides a clear view of accident trends, where a significant drop is observed over time. This could indicate that safety measures implemented during this period might have had an effect.
- **Why This Matters**: Understanding accident trends is crucial for policymakers, urban planners, and traffic management authorities. The declining trend in accidents might suggest that continued efforts in road safety and awareness can lead to further reductions in accidents.

#### Discussion of the Graph:
- The histogram effectively communicates the fluctuation in accident frequencies over time, highlighting both high and low points in the dataset.
- The high accident rates in the mid-2000s and their subsequent decline over time help contextualize improvements or changes in urban road safety protocols.
- The significant drop in accidents around 2020 aligns with global events (such as the pandemic) and warrants further analysis of external factors that influenced this trend.

In summary, **@fig-year-accident** shows a broad trend of decreasing accident frequencies over time, suggesting that certain factors, possibly road safety measures or external events, have contributed to fewer accidents in recent years. This graph serves as a foundation for further analysis on how factors such as road conditions, traffic density, and public policies might have influenced these changes.


```{r}
#| label: fig-hours-accident
#| fig-cap: Number of Accidents by Hour of Day and Road Condition
#| echo: false
#second plot
# Assuming your dataset is loaded into a dataframe called 'data'
# Convert TIME to numeric and extract HOUR
Motor_data$TIME <- as.numeric(Motor_data$TIME)
Motor_data$HOUR <- floor(Motor_data$TIME / 100)

# Group data by HOUR and RDSFCOND (Road Condition)
road_condition_per_hour <- Motor_data %>%
  group_by(HOUR, RDSFCOND) %>%
  summarise(accident_count = n())

# Plot the line graph for Accidents by Hour of Day and Road Condition
ggplot(road_condition_per_hour, aes(x=HOUR, y=accident_count, color=RDSFCOND)) +
  geom_line() +
  geom_point() +
  labs(title="Number of Accidents by Hour of Day and Road Condition", 
       x="Hour of the Day", 
       y="Number of Accidents") +
  theme_minimal() +
  theme(legend.title = element_text(size=10), legend.text = element_text(size=8))

```
### Explanation of the Graph (Based on the Dataset and Rubric):

The graph labeled **@fig-hours-accident** shows the number of accidents throughout the day, broken down by road conditions. This line graph provides a clear visualization of how the frequency of accidents fluctuates based on the hour of the day and how different road conditions affect the likelihood of accidents.

#### Context of the Dataset:
The dataset, sourced from OpenDataToronto, tracks motor vehicle collisions where fatalities or serious injuries occurred. This analysis focuses on how the **time of day** and **road surface conditions** influence accident rates, two critical variables for understanding traffic patterns.

#### Key Variables:
- **Hour of the Day (HOUR)**: The X-axis represents the time of day (in 24-hour format) at which the accidents occurred, grouped by hour.
- **Number of Accidents**: The Y-axis indicates the number of accidents that took place during each hour.
- **Road Condition (RDSFCOND)**: The color-coded lines represent different road surface conditions, such as "Dry," "Wet," "Ice," "Snow," and other types.

#### Broader Context and Explanation:
The graph shows the distribution of accidents across different hours of the day, highlighting when accidents are most frequent and under which road conditions they tend to happen. One notable pattern is that accidents occur most frequently during the late afternoon (around 15:00 to 18:00 hours), which corresponds to peak traffic hours when roads are most congested due to rush hour. This observation suggests that time-related factors such as high traffic density significantly contribute to the frequency of accidents.

#### Insights:
- **Dry Conditions**: The majority of accidents occur under **dry** conditions, with a steep increase during peak hours (around 15:00 to 18:00). This is likely because the majority of the time, roads are dry, and this is when traffic density is highest.
- **Wet Conditions**: **Wet** conditions follow a similar pattern but with fewer accidents. Notably, accidents under wet conditions also increase during the early morning and evening hours, potentially due to reduced visibility or increased slipperiness during these times.
- **Other Conditions**: **Ice, snow, and other adverse conditions** tend to show a lower number of accidents, but the severity of these accidents could be higher due to hazardous road conditions.

The pattern across most road conditions shows a sharp rise in accidents during morning (07:00-09:00) and evening (15:00-18:00) rush hours, likely due to higher traffic volumes during commuting hours.

#### Why This Matters:
Understanding how the time of day and road conditions influence accident rates is crucial for informing traffic management strategies and road safety policies. By identifying the times when accidents are most frequent, traffic authorities can implement targeted measures such as enforcing speed limits or managing congestion more effectively. Additionally, recognizing the influence of weather and road conditions allows for better planning during adverse conditions (e.g., salting roads, public warnings).

#### Discussion of the Graph:
- The line graph effectively illustrates how accidents fluctuate throughout the day under different road conditions, with clear peaks during high-traffic hours.
- The pattern of accidents under dry conditions highlights that while these conditions are safer overall, the increased traffic volumes during certain hours contribute to higher accident frequencies.
- Accidents during adverse conditions, while fewer in number, are important for identifying particularly dangerous times when drivers may need to be more cautious.

In summary, **@fig-hours-accident** provides a clear illustration of how road conditions and time of day interact to influence accident frequency. It reveals the critical times and conditions under which accidents are most likely to occur, suggesting that traffic management strategies should focus on high-traffic periods and that additional precautions are necessary during adverse weather conditions.


```{r}
#| label: fig-injury-impact
#| fig-cap: Number of Accidents by Injury Status and Impact Type
#| echo: false
# third plot

# Assuming your dataset is loaded into a dataframe called 'data'

# Group data by INJURY and IMPACTYPE, and count the number of accidents
injury_vs_impact_type <- Motor_data %>%
  group_by(INJURY, IMPACTYPE) %>%
  summarise(accident_count = n())

# Create a stacked bar chart
ggplot(injury_vs_impact_type, aes(x=IMPACTYPE, y=accident_count, fill=INJURY)) +
  geom_bar(stat="identity") +
  labs(title="Number of Accidents by Injury Status and Impact Type",
       x="Impact Type", 
       y="Number of Accidents") +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
  scale_fill_brewer(palette="Set3") # You can choose different color palettes
```
### Explanation of the Graph (Based on the Dataset and Rubric):

The graph labeled **@fig-injury-impact** shows a stacked bar chart illustrating the number of accidents categorized by **injury status** and **impact type**. This visualization provides insights into how different types of accidents (e.g., rear-end collisions, sideswipes, pedestrian collisions) are distributed across various levels of injury severity (e.g., fatal, major, minor, minimal, or none).

#### Context of the Dataset:
The dataset used here tracks motor vehicle collisions involving killed or seriously injured persons. This analysis focuses on the relationship between **impact type**—the manner in which accidents occurred—and **injury status**, the severity of injuries resulting from these collisions.

#### Key Variables:
- **Impact Type (IMPACTYPE)**: The X-axis represents different types of impacts or collisions, such as rear-end collisions, pedestrian collisions, sideswipes, and turning movements.
- **Number of Accidents**: The Y-axis shows the number of accidents associated with each impact type.
- **Injury Status (INJURY)**: The stacked bars represent different levels of injury severity, with colors corresponding to the categories (None, Minimal, Minor, Major, Fatal).

#### Broader Context and Explanation:
The stacked bar chart provides a clear understanding of the relationship between the types of accidents and their resulting injury severities. One key observation from the chart is that **rear-end collisions** account for the largest number of accidents, and the majority of these result in **minor or no injuries**. This suggests that while rear-end collisions are frequent, they are less likely to result in severe injuries.

On the other hand, **pedestrian collisions** and certain types of turning movements are more likely to result in **serious injuries or fatalities**, despite their lower overall frequency compared to rear-end collisions. This highlights the greater risk associated with these types of accidents, which often involve vulnerable road users or high-speed impacts.

#### Insights:
- **Rear-End Collisions**: As seen in the chart, rear-end collisions make up the bulk of the accidents but tend to result in fewer severe injuries. This suggests that such collisions often occur at lower speeds or in less dangerous conditions, though their frequency makes them a critical focus for traffic management.
- **Pedestrian and Turning Movement Collisions**: These types of accidents are associated with higher injury severities (e.g., major or fatal injuries). This is significant for understanding high-risk accident scenarios and suggests the need for focused safety measures in areas with high pedestrian traffic or where vehicles are frequently making turns.
- **Minimal and None Injury Categories**: A large portion of accidents falls into these categories across various impact types, indicating that not all collisions result in significant injuries. This could be due to the presence of safety measures such as seat belts and airbags or the lower severity of impact.

#### Why This Matters:
Understanding the correlation between **impact type** and **injury severity** is crucial for prioritizing traffic safety interventions. For example, strategies that aim to reduce rear-end collisions—such as promoting defensive driving and ensuring proper following distances—could help reduce the overall number of accidents. Meanwhile, preventing high-risk collisions, like those involving pedestrians or turning vehicles, could help mitigate serious injuries and fatalities.

#### Discussion of the Graph:
- This stacked bar chart effectively demonstrates how different types of accidents contribute to various injury severities.
- The **visual clarity** of the chart allows readers to quickly identify which accident types are most frequent and which ones result in more severe injuries, providing a comprehensive view of accident outcomes.
- **Color-coded injury categories** make it easy to compare the severity of injuries across different impact types, helping to highlight which accident types pose the most risk to public safety.

In summary, **@fig-injury-impact** provides a detailed breakdown of how different accident types result in varying levels of injury severity. This chart helps to identify accident types that need targeted interventions to reduce injury severity (such as pedestrian collisions), while also showing which types of accidents are most frequent and warrant general safety measures (such as rear-end collisions). This analysis can guide policymakers and traffic authorities in improving road safety for both drivers and pedestrians.


# Results

Our results are summarized in @tbl-modelresults.

```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false

```

```{r}
#| echo: false
#| eval: true
#| label: tbl-modelresults
#| tbl-cap: "Explanatory models of flight time based on wing width and wing length"
#| warning: false




```

```{r}

```

```{r}

```


# Discussion

### Conclusion:

The three graphs together provide a comprehensive overview of the factors influencing traffic accidents, focusing on their frequency, time of occurrence, road conditions, impact types, and injury outcomes.

The first graph (**@fig-year-accident**) reveals a declining trend in the overall number of accidents from 2005 to 2023, with a notable drop in recent years, likely influenced by external factors such as the COVID-19 pandemic. This trend suggests that road safety measures and other social factors may have contributed to a decrease in accidents, but further analysis is needed to identify the specific interventions that had the greatest impact.

The second graph (**@fig-hours-accident**) highlights how accidents are distributed throughout the day, showing clear peaks during the morning and evening rush hours, especially under dry road conditions. This indicates that traffic density during commuting hours is a significant factor in accident frequency, with adverse conditions such as wet or icy roads further increasing the likelihood of accidents. This insight underscores the need for targeted traffic management during peak hours and enhanced safety measures during adverse weather conditions.

The third graph (**@fig-injury-impact**) demonstrates how different types of collisions, such as rear-end and pedestrian collisions, correspond to varying levels of injury severity. Rear-end collisions are the most common but tend to result in minor or no injuries, while pedestrian collisions and turning movements are more likely to result in serious injuries or fatalities. This indicates that certain types of accidents require more focused safety interventions to reduce severe injuries and deaths, particularly in areas with high pedestrian activity or complex traffic movements.

Taken together, these three visualizations emphasize the importance of understanding how accident frequency, time of occurrence, road conditions, and collision types interact to shape traffic outcomes. They highlight the need for continued efforts to improve road safety, with a focus on managing high-risk times, dangerous impact types, and road conditions that contribute to more severe accidents. By analyzing these patterns, policymakers and traffic authorities can implement more effective strategies to reduce both the frequency of accidents and the severity of their consequences.

## First discussion point {#sec-first-point}

If my paper were 10 pages, then should be be at least 2.5 pages. The discussion is a chance to show off what you know and what you learnt from all this. 

## Second discussion point

## Third discussion point

## Weaknesses and next steps

Weaknesses and next steps should also be included.

\newpage

\appendix

# Appendix {-}


# Additional data details

# Model details {#sec-model-details}

## Posterior predictive check

In @fig-ppcheckandposteriorvsprior-1 we implement a posterior predictive check. This shows...

In @fig-ppcheckandposteriorvsprior-2 we compare the posterior with the prior. This shows... 

```{r}
#| eval: true
#| echo: false
#| message: false
#| warning: false
#| label: fig-ppcheckandposteriorvsprior
#| layout-ncol: 2
#| fig-cap: "Examining how the model fits, and is affected by, the data"
#| fig-subcap: ["Posterior prediction check", "Comparing the posterior with the prior"]


```

## Diagnostics

@fig-stanareyouokay-1 is a trace plot. It shows... This suggests...

@fig-stanareyouokay-2 is a Rhat plot. It shows... This suggests...

```{r}
#| echo: false
#| eval: true
#| message: false
#| warning: false
#| label: fig-stanareyouokay
#| fig-cap: "Checking the convergence of the MCMC algorithm"
#| fig-subcap: ["Trace plot", "Rhat plot"]
#| layout-ncol: 2

```



\newpage


# References


